head.ready(function(){function e(){var e=$(".js-order-text").text().length,i=$(".js-order-in"),n=$(".js-order-more");e>50?n.show():n.hide(),n.on("click",function(){return i.addClass("is-active"),!1}),$(".js-order-close").on("click",function(){return i.removeClass("is-active"),!1}),i.click(function(e){e.stopPropagation()})}function i(){$("body").each(function(){function e(e){a.find(".js-tab-link.is-active").removeClass("is-active"),$(".js-tabs-cont").removeClass("is-active"),$(e).addClass("is-active"),a.find(".js-tab-link").each(function(){var i=$(this).attr("href");i==e&&$(this).addClass("is-active")}),e||(a.find(".tabs__item:first .js-tab-link").addClass("is-active"),window.location.hash=n[0],$("html, body").animate({scrollTop:0})),t(),s()}function i(){function i(){$(".js-tabs-cont").removeClass("is-target"),$(t).addClass("is-target")}var t=window.location.hash,s=!1;$.each(n,function(){return t==this?(e(t),s=!0,ltie9?i(t):!1,!1):void 0}),0==s&&e()}var n=["#card","#robox","#purse","#terminals","#cashbox","#from-your-balance","#internet-banking"],a=$(".js-tabs");ltie9=$.browser.msie&&$.browser.version<=9,$(this).find(a).length&&(i(),$(".js-tab-link").on("click",function(e){$("body").removeClass("is-open-menu"),e.preventDefault();{var n=$(this).attr("href");$(n).offset().top}$(".js-tab-link").removeClass("is-active"),$(this).addClass("is-active"),$("html, body").animate({scrollTop:100},600,function(){window.location.hash=n,$(window).bind("hashchange",function(){i()})})}))})}function n(){$(".js-open-myemail").on("change",function(e){e.preventDefault();var i=$(".js-myemail");$(this).is(":checked")?(i.show(),$(".js-open-myemail").attr("checked","checked")):(i.hide(),$(".js-open-myemail").removeAttr("checked"))}),$(".js-text-myemail").on("input",function(){$(".js-text-myemail").val($(this).val())})}function t(){var e=$(".js-tabs-cont.is-active").find(".js-payment");e.each(function(){var i=$(this).find(".js-payment-item");i.hasClass("is-active")?$(".js-payment-item").on("click",function(e){e.preventDefault(),i.removeClass("is-active"),$(this).addClass("is-active"),$(this).hasClass("is-disable")&&$(this).removeClass("is-active"),s()}):e.find(".js-payment-item:first").addClass("is-active")})}function s(){var e=$(".js-alfa-input");$(".js-alfa").hasClass("is-active")?e.addClass("is-active"):e.removeClass("is-active")}function a(){$(".js-open-popup").on("click",function(){$("body").addClass("is-open-popup")}),$(".js-popup, .js-popup-close").on("click",function(){return $("body").removeClass("is-open-popup"),!1}),$(".js-popup-in").click(function(e){e.stopPropagation()})}function r(){var e=$(".js-tabs-cont.is-active").find("#form");e.each(function(){var e=$(this).find('input[name="email"]'),i=$(this).find('button[type="submit"]'),n=/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}$/,t=/[-0-9А-Яа-я.+_]+@[-0-9А-Яа-я.+_]+\.[0-9А-Яа-я]{2,4}$/;i.on("click",function(){var i=e.val();1>i&&(n.test(i)||t.test(i))?($(this).addClass("error"),$(".js-error-text1").show(),$(".js-error-text2").hide()):($(this).removeClass("error"),$(".js-error-text1").hide()),n.test(i)||t.test(i)?(e.removeClass("error"),$(".js-error-text2").hide(),$(".js-error-text1").hide()):(e.addClass("error"),$(".js-error-text2").show(),$(".js-error-text1").hide())}),e.on("keyup",function(){var i=e.val();i>0&&($(this).removeClass("error"),$(".js-error-text1").hide()),(n.test(i)||t.test(i))&&(e.removeClass("error"),$(".js-error-text2").hide(),$(".js-error-text1").hide())})})}function o(){$('input[name="phone"]').on("focus",function(){$(this).val()<1&&$(this).val("+7")}),$('input[name="phone"]').on("blur",function(){$(this).val().length<7||$(this).val().length>64?$(this).addClass("error"):$(this).removeClass("error")}),$('input[name="phone"]').on("keyup",function(){var e=$(this).val(),i=/[^0-9,+_""-]/;i.test(e)&&(e=e.replace(i,""),$(this).val("+7",e))})}$(document).on("click",function(){$(".js-info").removeClass("is-active"),$(".js-order-in").removeClass("is-active")}),e(),i(),$(".js-info-btn").on("click",function(){$(".js-order-in").removeClass("is-active");var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):$(".js-info").hasClass("is-active")?($(".js-info").removeClass("is-active"),e.addClass("is-active")):e.toggleClass("is-active")}),$(".js-info-btn").click(function(e){e.stopPropagation()}),n(),t(),a(),$("body").each(function(){$(this).find("#countbox").length&&$("#countbox").countDown({targetOffset:{day:1,month:0,year:0,hour:12,min:54,sec:42},omitWeeks:!0})}),$(".js-phone-number").on("input",function(){$(".js-phone-number").val($(this).val())}),$("#form").validate({rules:{number:"required",month:"required",year:"required",cvv:"required",name:"required",phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form1").validate({rules:{number:"required",month:"required",year:"required",cvv:"required",name:"required",phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form2").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form3").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form4").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form5").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form6").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$('input[name="number"]').mask("9999 9999 9999 9999?999",{placeholder:""}),$('input[name="number"]').on("click",function(){var e=$(this).val();"   "==e&&(e=e.replace(""),$(this).val("",e))}),$('input[name="month"], input[name="year"], input[name="cvv"]').on("keyup",function(){var e=$(this).val(),i=/[^0-9,]/;i.test(e)&&(e=e.replace(i,""),$(this).val("",e))}),$('input[name="month"], input[name="year"]').on("change",function(){var e=$(this).val();2>e&&(e=e.replace(""),$(this).val("",e))}),$('input[name="month"]').on("input",function(){var e=$(this).val(),i=e.substring(0,1),n=e.substring(0,2);i>1&&(e=e.replace(""),$(this).val("",e)),e>12&&(n="1",e=e.replace(""),$(this).val(n,e))}),$('input[name="cvv"]').on("change",function(){var e=$(this).val();$(this).val()<100&&(e=e.replace(""),$(this).val("",e))}),$('input[name="name"]').on("keyup",function(){var e=$(this).val(),i=/[^\sa-zA-Zа-яА-Я]$/i;i.test(e)&&(e=e.replace(i,""),$(this).val(e))}),$('input[name="name"]').liTranslit(),r(),o(),$(".js-menu").on("click",function(){$("body").toggleClass("is-open-menu")}),$(".js-overlay").on("click",function(){$("body").removeClass("is-open-menu")})});