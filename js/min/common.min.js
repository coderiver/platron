head.ready(function(){function e(){var e=$(".js-order-text").text().length,s=$(".js-order-in"),t=$(".js-order-more");e>50?t.show():t.hide(),t.on("click",function(){return s.addClass("is-active"),!1}),$(".js-order-close").on("click",function(){return s.removeClass("is-active"),!1}),s.click(function(e){e.stopPropagation()})}function s(){var e=window.location.hash,s=$(".js-tabs").find("li:first a").text();if($(".js-opted-sel").text(s),e){$('[href="'+e+'"]').parents(".js-tabs-group").find(".js-tabs-content").removeClass("is-active"),$('[data-id="'+e+'"]').addClass("is-active"),$('[href="'+e+'"]').parents(".js-tabs").find("li").removeClass("is-active"),$('[href="'+e+'"]').parent().addClass("is-active");var s=$(".js-tabs").find("li.is-active a").text();$(".js-opted-sel").text(s),n()}else $(".js-tabs").each(function(){$(".js-tabs").find("li").removeClass("is-active"),$(".js-tabs-group").find(".js-tabs-content").removeClass("is-active"),$(this).find("li:first").addClass("is-active"),$(this).next().addClass("is-active")});$(".js-tabs").find("li a").on("click",function(){$("body").removeClass("is-open-menu")})}function t(){$(".js-open-myemail").on("change",function(e){e.preventDefault();var s=$(".js-myemail");$(this).is(":checked")?(s.show(),$(".js-open-myemail").attr("checked","checked")):(s.hide(),$(".js-open-myemail").removeAttr("checked"))}),$(".js-text-myemail").on("input",function(){$(".js-text-myemail").val($(this).val())})}function i(){$(".js-payment").find(".js-payment-item:first").addClass("is-active"),$(".js-payment-item").on("click",function(){var e=$(".js-tabs-content.is-active .js-payment-item"),s=$(this),t=s.parents(".js-tabs-content"),i=s.find(".price").text(),r=s.find(".currency").text(),a=t.find(".checkout"),o=a.find(".price"),l=a.find(".currency");o.text(i),l.text(r),e.hasClass("is-active")&&(e.removeClass("is-active"),$(this).addClass("is-active"),$(this).hasClass("is-disable")&&$(this).removeClass("is-active"),n())})}function n(){var e=$(".js-alfa-input");$(".js-alfa").hasClass("is-active")?e.addClass("is-active"):e.removeClass("is-active")}function r(){$(".js-open-popup").on("click",function(){$("body").addClass("is-open-popup")}),$(".js-popup, .js-popup-close").on("click",function(){return $("body").removeClass("is-open-popup"),!1}),$(".js-popup-in").click(function(e){e.stopPropagation()})}function a(){var e=$(".js-tabs-content.is-active").find("#form");e.each(function(){var e=$(this).find('input[name="email"]'),s=$(this).find('button[type="submit"]'),t=/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}$/,i=/[-0-9А-Яа-я.+_]+@[-0-9А-Яа-я.+_]+\.[0-9А-Яа-я]{2,4}$/;s.on("click",function(){var s=e.val();1>s?($(this).addClass("error"),$(".js-error-text1").show(),$(".js-error-text2").hide()):($(this).removeClass("error"),$(".js-error-text1").hide()),t.test(s)||i.test(s)?(e.removeClass("error"),$(".js-error-text2").hide(),$(".js-error-text1").hide()):(e.addClass("error"),$(".js-error-text2").show(),$(".js-error-text1").hide())}),e.on("keyup",function(){var s=e.val();s>0&&($(this).removeClass("is-error"),$(".js-error-text1").hide()),t.test(s)||i.test(s)?(e.removeClass("is-error"),$(".js-error-text2").hide(),$(".js-error-text1").hide()):(e.addClass("is-error"),$(".js-error-text2").show(),$(".js-error-text1").hide()),0==s.length&&($(this).removeClass("is-error"),$(".js-error-text2").hide())}),e.on("change",function(){var s=e.val();1>s?($(this).addClass("is-error"),$(".js-error-text1").show(),$(".js-error-text2").hide()):($(this).removeClass("is-error"),$(".js-error-text1").hide()),t.test(s)||i.test(s)?(e.removeClass("is-error"),$(".js-error-text2").hide(),$(".js-error-text1").hide()):(e.addClass("is-error"),$(".js-error-text2").show(),$(".js-error-text1").hide()),0==s.length&&($(this).removeClass("is-error"),$(".js-error-text2").hide())})})}function o(){$('input[name="phone"]').on("blur",function(){var e=$(this).val();"+7"==e&&(e=e.replace(""),$(this).val("",e),$(this).removeClass("error"))});$(".js-tabs-cont.is-active").find("#form");$('input[name="phone"]').on("focus",function(){$(this).val()<1&&$(this).val("+7"),$(this).setCursorPosition(input.val().length)}),$('input[name="phone"]').on("keyup",function(){var e=$(this).val(),s=/[^0-9,+_ ""()-]/;s.test(e)&&(e=e.replace(s,""),$(this).val(e))})}$(document).on("click",function(){$(".js-info").removeClass("is-active"),$(".js-order-in").removeClass("is-active")}),e(),s(),$(window).bind("hashchange",function(){var e=$(this).find("li:first");s(),e.hasClass("is-active")&&(e.next().removeClass("is-active"),$(this).next().next().removeClass("is-active"))}),$(".js-info-btn").on("click",function(){$(".js-order-in").removeClass("is-active");var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):$(".js-info").hasClass("is-active")?($(".js-info").removeClass("is-active"),e.addClass("is-active")):e.toggleClass("is-active")}),$(".js-info-btn").click(function(e){e.stopPropagation()}),t(),i(),r(),$("body").each(function(){$(this).find("#countbox").length&&$("#countbox").countDown({targetOffset:{day:1,month:0,year:0,hour:12,min:54,sec:42},omitWeeks:!0})}),$(".js-phone-number").on("input",function(){$(".js-phone-number").val($(this).val())}),$("#form").validate({rules:{number:"required",month:"required",year:"required",cvv:"required",name:"required",phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$.validator.setDefaults({onkeyup:function(e){return"phone"==e.name?!1:void 0}}),$("#form1").validate({rules:{number:"required",month:"required",year:"required",cvv:"required",name:"required",phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form2").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form3").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form4").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form5").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form6").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$('input[name="number"]').inputmask({mask:"9999 9999 9999 9999999",showMaskOnHover:!1,showMaskOnFocus:!1,placeholder:""}),$('input[name="month"], input[name="year"], input[name="cvv"]').on("keyup",function(){$(this).val()}),$('input[name="month"], input[name="year"]').on("change",function(){$(this).val()}),$('input[name="month"]').on("input",function(){var e=$(this).val(),s=e.substring(0,1),t=e.substring(0,2);s>1&&(e=e.replace(""),$(this).val("",e)),e>12&&(t="1",e=e.replace(""),$(this).val(t,e))}),$('input[name="name"]').on("keyup",function(){var e=$(this).val(),s=/[^\sa-zA-Zа-яА-Я]$/i;s.test(e)&&(e=e.replace(s,""),$(this).val(e))}),$('input[name="name"]').liTranslit(),a(),o(),$(".js-menu, .js-opted-sel").on("click",function(){$("body").toggleClass("is-open-menu")}),$(".js-overlay").on("click",function(){$("body").removeClass("is-open-menu")})});