head.ready(function(){function e(){var e=$(".js-order-text").text().length,s=$(".js-order-in"),i=$(".js-order-more");e>50?i.show():i.hide(),i.on("click",function(){return s.addClass("is-active"),!1}),$(".js-order-close").on("click",function(){return s.removeClass("is-active"),!1}),s.click(function(e){e.stopPropagation()})}function s(){$("body").each(function(){function e(e){a.find(".js-tab-link.is-active").removeClass("is-active"),$(".js-tabs-cont").removeClass("is-active"),$(e).addClass("is-active"),a.find(".js-tab-link").each(function(){var s=$(this).attr("href");s==e&&$(this).addClass("is-active")}),e||(a.find(".tabs__item:first .js-tab-link").addClass("is-active"),a.find(".js-tabs-cont:first").addClass("is-active"),window.location.hash=i[0],$("html, body").animate({scrollTop:0})),n(),t()}function s(){function s(){$(".js-tabs-cont").removeClass("is-target"),$(n).addClass("is-target")}var n=window.location.hash,t=!1;$.each(i,function(){return n==this?(e(n),t=!0,ltie9?s(n):!1,!1):void 0}),0==t&&e()}var i=["#card","#robox","#purse","#terminals","#cashbox","#from-your-balance","#internet-banking"],a=$(".js-tabs");ltie9=$.browser.msie&&$.browser.version<=9,$(this).find(a).length&&(s(),$(".js-tab-link").on("click",function(e){$("body").removeClass("is-open-menu"),e.preventDefault();{var i=$(this).attr("href");$(i).offset().top}$("html, body").animate({scrollTop:100},300,function(){window.location.hash=i,$(window).bind("hashchange",function(){s()}),$(".js-tab-link").removeClass("is-active"),$(this).addClass("is-active")})}))})}function i(){$(".js-open-myemail").on("change",function(e){e.preventDefault();var s=$(".js-myemail");$(this).is(":checked")?(s.show(),$(".js-open-myemail").attr("checked","checked")):(s.hide(),$(".js-open-myemail").removeAttr("checked"))}),$(".js-text-myemail").on("input",function(){$(".js-text-myemail").val($(this).val())})}function n(){var e=$(".js-tabs-cont.is-active").find(".js-payment");e.each(function(){var s=$(this).find(".js-payment-item");s.hasClass("is-active")?$(".js-payment-item").on("click",function(e){e.preventDefault(),s.removeClass("is-active"),$(this).addClass("is-active"),$(this).hasClass("is-disable")&&$(this).removeClass("is-active"),t()}):e.find(".js-payment-item:first").addClass("is-active")})}function t(){var e=$(".js-alfa-input");$(".js-alfa").hasClass("is-active")?e.addClass("is-active"):e.removeClass("is-active")}function a(){$(".js-open-popup").on("click",function(){$("body").addClass("is-open-popup")}),$(".js-popup, .js-popup-close").on("click",function(){return $("body").removeClass("is-open-popup"),!1}),$(".js-popup-in").click(function(e){e.stopPropagation()})}function r(){var e=$(".js-tabs-cont.is-active").find("#form");e.each(function(){var e=$(this).find('input[name="email"]'),s=$(this).find('button[type="submit"]'),i=/[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+\.[a-zA-Z]{2,4}$/,n=/[-0-9А-Яа-я.+_]+@[-0-9А-Яа-я.+_]+\.[0-9А-Яа-я]{2,4}$/;s.on("click",function(){var s=e.val();1>s?($(this).addClass("error"),$(".js-error-text1").show(),$(".js-error-text2").hide()):($(this).removeClass("error"),$(".js-error-text1").hide()),i.test(s)||n.test(s)?(e.removeClass("error"),$(".js-error-text2").hide(),$(".js-error-text1").hide()):(e.addClass("error"),$(".js-error-text2").show(),$(".js-error-text1").hide())}),e.on("change",function(){var s=e.val();1>s?($(this).addClass("is-error"),$(".js-error-text1").show(),$(".js-error-text2").hide()):($(this).removeClass("is-error"),$(".js-error-text1").hide()),i.test(s)||n.test(s)?(e.removeClass("is-error"),$(".js-error-text2").hide(),$(".js-error-text1").hide()):(e.addClass("is-error"),$(".js-error-text2").show(),$(".js-error-text1").hide()),0==s.length&&($(this).removeClass("is-error"),$(".js-error-text2").hide())})})}function o(){$('input[name="phone"]').on("blur",function(){var e=$(this).val();"+7"==e&&(e=e.replace(""),$(this).val("",e),$(this).removeClass("error"))});$(".js-tabs-cont.is-active").find("#form");$('input[name="phone"]').on("focus",function(){$(this).val()<1&&$(this).val("+7")}),$('input[name="phone"]').on("keyup",function(){var e=$(this).val(),s=/[^0-9,+_ ""()-]/;s.test(e)&&(e=e.replace(s,""),$(this).val(e))})}$(document).on("click",function(){$(".js-info").removeClass("is-active"),$(".js-order-in").removeClass("is-active")}),e(),s(),$(".js-info-btn").on("click",function(){$(".js-order-in").removeClass("is-active");var e=$(this).parent();e.hasClass("is-active")?e.removeClass("is-active"):$(".js-info").hasClass("is-active")?($(".js-info").removeClass("is-active"),e.addClass("is-active")):e.toggleClass("is-active")}),$(".js-info-btn").click(function(e){e.stopPropagation()}),i(),n(),a(),$("body").each(function(){$(this).find("#countbox").length&&$("#countbox").countDown({targetOffset:{day:1,month:0,year:0,hour:12,min:54,sec:42},omitWeeks:!0})}),$(".js-phone-number").on("input",function(){$(".js-phone-number").val($(this).val())}),$("#form").validate({rules:{number:"required",month:"required",year:"required",cvv:"required",name:"required",phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$.validator.setDefaults({onkeyup:function(e){return"phone"==e.name?!1:void 0}}),$("#form1").validate({rules:{number:"required",month:"required",year:"required",cvv:"required",name:"required",phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form2").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form3").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form4").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form5").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$("#form6").validate({rules:{phone:{required:!0,minlength:7}},messages:{phone:{required:"Необходимо указать номер телефона",minlength:"Поле заполнено неверно"}}}),$('input[name="number"]').inputmask({mask:"9999 9999 9999 9999999",showMaskOnHover:!1,showMaskOnFocus:!1,placeholder:""}),$('input[name="number"]').on("change",function(){var e=$(this).val();e.length<19&&(e=e.replace(""),$(this).val("",e))}),$('input[name="month"], input[name="year"], input[name="cvv"]').on("keyup",function(){var e=$(this).val(),s=/[^0-9,]/;s.test(e)&&(e=e.replace(s,""),$(this).val("",e))}),$('input[name="month"], input[name="year"]').on("change",function(){var e=$(this).val();2>e&&(e=e.replace(""),$(this).val("",e))}),$('input[name="month"]').on("input",function(){var e=$(this).val(),s=e.substring(0,1),i=e.substring(0,2);s>1&&(e=e.replace(""),$(this).val("",e)),e>12&&(i="1",e=e.replace(""),$(this).val(i,e))}),$('input[name="cvv"]').on("change",function(){var e=$(this).val();$(this).val()<100&&(e=e.replace(""),$(this).val("",e))}),$('input[name="name"]').on("keyup",function(){var e=$(this).val(),s=/[^\sa-zA-Zа-яА-Я]$/i;s.test(e)&&(e=e.replace(s,""),$(this).val(e))}),$('input[name="name"]').liTranslit(),r(),o(),$(".js-menu").on("click",function(){$("body").toggleClass("is-open-menu")}),$(".js-overlay").on("click",function(){$("body").removeClass("is-open-menu")})});